<!DOCTYPE html>
<html lang="kk">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–∞—Ä–∏—Ö–∏ –®–∞–π“õ–∞—Å</title>
    <link href="https://fonts.googleapis.com/css2?family=Indie+Flower&family=Open+Sans:wght@400;600;800&display=swap"
        rel="stylesheet">
    <style>
        /* –ë–ï–¢–¢–Ü“¢ –ê–®–´–õ–£ –ê–ù–ò–ú–ê–¶–ò–Ø–°–´ */
        body {
            margin: 0;
            padding: 0;
            background-color: #000;
            font-family: 'Open Sans', sans-serif;
            overflow: hidden;
            height: 100vh;
            width: 100vw;
            opacity: 0;
            transition: opacity 1s ease;
        }

        body.loaded {
            opacity: 1;
        }

        #game-container {
            position: relative;
            width: 100%;
            height: 100%;
            background: #000;
        }

        video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* –ö–†–ï–°–¢–ò–ö (–®–´“í–£) */
        .back-btn {
            position: absolute;
            top: 20px;
            right: 30px;
            font-size: 40px;
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            transition: 0.3s;
            cursor: pointer;
            z-index: 200;
            font-weight: bold;
            font-family: Arial, sans-serif;
            text-shadow: 0 0 10px rgba(0, 0, 0, 0.8);
        }

        .back-btn:hover {
            color: #3498db;
            transform: scale(1.2);
        }

        /* --- PLAY/PAUSE –û–†–¢–ê–õ–´“ö –ò–ö–û–ù–ö–ê–°–´ --- */
        #center-status {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 80px;
            color: rgba(255, 255, 255, 0.9);
            background: rgba(0, 0, 0, 0.4);
            border-radius: 50%;
            width: 120px;
            height: 120px;
            display: flex;
            justify-content: center;
            align-items: center;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.5s ease, transform 0.5s ease;
            z-index: 90;
        }

        .status-show {
            opacity: 1 !important;
            transform: translate(-50%, -50%) scale(1.2) !important;
        }

        /* --- –ë–ê–°“ö–ê–†–£ –ü–ê–ù–ï–õ–Ü --- */
        .controls-area {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 25%;
            background: linear-gradient(to top, rgba(0, 0, 0, 0.9), transparent);
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            padding-bottom: 20px;
            opacity: 0;
            transition: opacity 0.4s ease;
            z-index: 100;
        }

        .controls-area:hover {
            opacity: 1;
        }

        /* –°“±—Ä–∞“õ —à—ã“õ“õ–∞–Ω–¥–∞ –ø–∞–Ω–µ–ª—å –∫”©—Ä—ñ–Ω—ñ–ø —Ç“±—Ä–∞–¥—ã */
        .force-show {
            opacity: 1 !important;
        }

        .buttons-row {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 30px;
            margin-bottom: 15px;
        }

        .timeline-row {
            display: flex;
            align-items: center;
            width: 90%;
            margin: 0 auto;
            gap: 15px;
            color: white;
            font-family: monospace;
            font-size: 14px;
        }

        input[type=range] {
            flex-grow: 1;
            cursor: pointer;
            accent-color: #3498db;
            height: 4px;
        }

        .ctrl-btn {
            background: rgba(255, 255, 255, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            border-radius: 50%;
            cursor: pointer;
            transition: 0.2s;
            backdrop-filter: blur(5px);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .ctrl-btn:hover {
            background: #3498db;
            border-color: #3498db;
            transform: scale(1.1);
        }

        #playPauseBtn {
            width: 60px;
            height: 60px;
            font-size: 24px;
        }

        .skip-btn {
            width: 45px;
            height: 45px;
            font-size: 12px;
            font-weight: bold;
        }

        /* --- –ñ–ê–†“ö–´–†–ê–£ –≠–§–§–ï–ö–¢–Ü–°–Ü --- */
        #flash-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 55;
            box-shadow: inset 0 0 0 0 transparent;
            transition: box-shadow 0.2s ease-out;
        }

        .flash-green {
            box-shadow: inset 0 0 100px 50px rgba(46, 204, 113, 0.6) !important;
        }

        .flash-red {
            box-shadow: inset 0 0 100px 50px rgba(231, 76, 60, 0.6) !important;
        }

        /* --- –°“∞–†–ê“ö –¢–ï–†–ï–ó–ï–°–Ü (–ñ–û“í–ê–†“í–´ –ñ–ê“ö–¢–ê) --- */
        #question-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: transparent;
            backdrop-filter: none;

            display: none;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;

            padding-top: 100px;
            z-index: 60;
        }

        .question-box {
            background: linear-gradient(145deg, rgba(44, 62, 80, 0.95), rgba(52, 73, 94, 0.95));
            padding: 25px;
            border-radius: 20px;
            text-align: center;
            width: 80%;
            max-width: 800px;
            border: 2px solid #3498db;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            color: white;
            animation: slideDown 0.5s ease;
        }

        @keyframes slideDown {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }

            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        h2 {
            color: #3498db;
            margin: 0 0 20px 0;
            font-family: 'Indie Flower', cursive;
            font-size: 28px;
        }

        .answers {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
        }

        @media (max-width: 768px) {
            .answers {
                grid-template-columns: 1fr 1fr;
            }

            #question-overlay {
                padding-top: 120px;
            }
        }

        button.answer-btn {
            padding: 12px;
            font-size: 15px;
            cursor: pointer;
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            border: 1px solid rgba(52, 152, 219, 0.5);
            border-radius: 10px;
            transition: all 0.2s;
            font-family: 'Open Sans', sans-serif;
            font-weight: 600;
        }

        button.answer-btn:hover {
            background-color: #3498db;
            border-color: #3498db;
            transform: scale(1.05);
        }

        /* --- –ù”ò–¢–ò–ñ–ï –≠–ö–†–ê–ù–´ --- */
        #result-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 80;
            animation: fadeIn 1s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        .result-box {
            text-align: center;
            color: white;
        }

        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            border: 8px solid #3498db;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 40px;
            font-weight: bold;
            margin: 0 auto 30px;
            box-shadow: 0 0 30px #3498db;
            background: #2c3e50;
        }

        .result-title {
            font-family: 'Indie Flower';
            font-size: 50px;
            color: #f1c40f;
            margin-bottom: 10px;
        }

        .result-desc {
            font-size: 20px;
            margin-bottom: 40px;
            color: #bdc3c7;
        }

        .result-btn {
            padding: 15px 40px;
            font-size: 20px;
            background: #e74c3c;
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: 0.3s;
            font-weight: bold;
            box-shadow: 0 0 20px rgba(231, 76, 60, 0.5);
        }

        .result-btn:hover {
            background: #c0392b;
            transform: scale(1.1);
        }

        /* START SCREEN */
        #start-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('—à–∞–π–∫–∞—Å.jpg') no-repeat center center/cover;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 70;
            flex-direction: column;
            text-align: center; /* –ú”ô—Ç—ñ–Ω–¥—ñ –æ—Ä—Ç–∞“ì–∞ —Ç“Ø–∑–µ—É */
        }

        #start-screen::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: -1;
        }

        /* --- –ñ–ê“¢–ê –°–ò–ü–ê–¢–¢–ê–ú–ê (–û–ü–ò–°–ê–ù–ò–ï) –°–¢–ò–õ–Ü --- */
        .start-desc {
            color: #ecf0f1;
            font-size: 20px;
            max-width: 700px;
            margin-bottom: 30px;
            line-height: 1.5;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.8);
            font-weight: 600;
            padding: 0 20px;
        }

        #start-btn {
            padding: 15px 50px;
            font-size: 24px;
            background: #2980b9;
            border: none;
            color: white;
            cursor: pointer;
            border-radius: 50px;
            box-shadow: 0 0 20px rgba(52, 152, 219, 0.5);
            transition: 0.3s;
        }

        #start-btn:hover {
            transform: scale(1.1);
            background: #3498db;
        }
    </style>
</head>

<body onload="document.body.classList.add('loaded')">

    <div id="game-container">
        <div id="flash-overlay"></div>

        <div id="center-status">‚ñ∂</div>

        <a class="back-btn" onclick="smoothExit()">&times;</a>

        <video id="battleVideo" playsinline onclick="togglePlay()">
            <source src="video.mp4" type="video/mp4">
        </video>

        <div class="controls-area" id="controlsArea">
            <div class="buttons-row">
                <button class="ctrl-btn skip-btn" onclick="skip(-10)">-10</button>
                <button class="ctrl-btn" onclick="togglePlay()" id="playPauseBtn">‚ùö‚ùö</button>
                <button class="ctrl-btn skip-btn" onclick="skip(10)">+10</button>
            </div>
            <div class="timeline-row">
                <span id="currentTimeText">00:00</span>
                <input type="range" id="seekBar" value="0" min="0" step="1">
                <span id="durationText">00:00</span>
            </div>
        </div>

        <div id="start-screen">
            <h1 style="color: #3498db; font-family: 'Indie Flower'; font-size: 60px; text-shadow: 0 5px 10px black; z-index: 2; margin-bottom: 10px;">
                –¢–ê–†–ò–•–ò –®–ê–ô“ö–ê–°
            </h1>
            
            <p class="start-desc" style="z-index: 2;">
                1643 –∂—ã–ª. –û—Ä–±“±–ª–∞“õ —à–∞–π“õ–∞—Å—ã. <br>
                –ê–∑ “ì–∞–Ω–∞ “õ–æ–ª–º–µ–Ω –∂–æ“£“ì–∞—Ä ”ô—Å–∫–µ—Ä—ñ–Ω–µ —Ç–æ–π—Ç–∞—Ä—ã—Å –±–µ—Ä–≥–µ–Ω “õ–∞–∑–∞“õ –±–∞—Ç—ã—Ä–ª–∞—Ä—ã–Ω—ã“£ –µ—Ä–ª—ñ–≥—ñ–Ω–µ –∫—É”ô –±–æ–ª. <br>
                –í–∏–¥–µ–æ–Ω—ã –º“±“õ–∏—è—Ç “õ–∞—Ä–∞–ø, —Å“±—Ä–∞“õ—Ç–∞—Ä“ì–∞ –∂–∞—É–∞–ø –±–µ—Ä!
            </p>

            <button id="start-btn" style="z-index: 2;">–ë–ê–°–¢–ê–£ (3:55)</button>
        </div>

        <div id="question-overlay">
            <div class="question-box">
                <h2 id="q-text">–°“±—Ä–∞“õ...</h2>
                <div class="answers" id="answers-container"></div>
            </div>
        </div>

        <div id="result-screen">
            <div class="result-box">
                <div class="result-title">–®–ê–ô“ö–ê–° –ê–Ø“ö–¢–ê–õ–î–´!</div>
                <div class="score-circle" id="final-score">0/8</div>
                <div class="result-desc" id="result-emoji">–°—ñ–∑–¥—ñ“£ –Ω”ô—Ç–∏–∂–µ“£—ñ–∑</div>
                <button class="result-btn" onclick="smoothExit()">–ú”ò–ó–Ü–†–ì–ï “ö–ê–ô–¢–£</button>
            </div>
        </div>
    </div>

    <script>
        const video = document.getElementById('battleVideo');
        const seekBar = document.getElementById('seekBar');
        const playPauseBtn = document.getElementById('playPauseBtn');
        const overlay = document.getElementById('question-overlay');
        const qText = document.getElementById('q-text');
        const answersContainer = document.getElementById('answers-container');
        const startScreen = document.getElementById('start-screen');
        const startBtn = document.getElementById('start-btn');
        const flashDiv = document.getElementById('flash-overlay');
        const controlsArea = document.getElementById('controlsArea');
        const centerStatus = document.getElementById('center-status');

        const resultScreen = document.getElementById('result-screen');
        const finalScore = document.getElementById('final-score');
        const resultEmoji = document.getElementById('result-emoji');

        const curTimeText = document.getElementById('currentTimeText');
        const durTimeText = document.getElementById('durationText');

        const questions = [
            { time: 248, question: "–ñ”ô“£–≥—ñ—Ä —Ö–∞–Ω–Ω—ã“£ “õ–∞–ª“ì–∞–Ω 300 —Å–∞—Ä–±–∞–∑—ã “õ–∞–π–¥–∞ –æ—Ä–Ω–∞–ª–∞—Å—Ç—ã?", options: ["–¢–∞—É–¥—ã“£ –±–∞—É—Ä–∞–π—ã–Ω–∞ –∂–∞–π“ì–∞—Å—Ç—ã", "–ñ–æ“£“ì–∞—Ä–ª–∞—Ä“ì–∞ “õ–∞—Ä—Å—ã —à—ã“õ—Ç—ã", "–¢–∞—É–¥—ã –æ–π–Ω–∞–ª—ã–ø ”©—Ç—Ç—ñ", "–ë–∞—Å“õ–∞ 300 —Å–∞—Ä–±–∞–∑–¥–∞—Ä–¥—ã“£ “õ–∞—Å—ã–Ω–¥–∞ –æ—Ä–Ω–∞–ª—ã—Å—Ç—ã"], correct: 0 },
            { time: 279, question: "–ë–∞—Ç—ã—Ä “ö–æ–Ω—Ç–∞–π—à—ã “Ø—à—ñ–Ω –±“±–ª –Ω–µ–ª—ñ–∫—Ç–µ–Ω –∫“Ø—Ç–ø–µ–≥–µ–Ω –∂–∞“ì–¥–∞–π –±–æ–ª–¥—ã?", options: ["–°–µ–±–µ–±—ñ –±“±–ª –æ–Ω—ã“£ –±—ñ—Ä—ñ–Ω—à—ñ –∂–æ—Ä—ã“ì—ã –±–æ–ª–¥—ã", "–°–µ–±–µ–±—ñ “õ–∞–∑–∞“õ—Ç–∞—Ä —Ç—ã–º –∫”©–ø –±–æ–ª–¥—ã", "–°–µ–±–µ–±—ñ “∞–ª—ã –î–∞–ª–∞–¥–∞ –±“±“ì–∞–Ω –¥–µ–π—ñ–Ω –µ—à–∫—ñ–º –æ—Ä “õ–∞–∑“ì–∞–Ω –µ–º–µ—Å", "–°–µ–±–µ–±—ñ –∂–æ“£“ì–∞—Ä ”ô—Å–∫–µ—Ä—ñ ”ô–ª—Å—ñ–∑ –±–æ–ª–¥—ã"], correct: 2 },
            { time: 316, question: "“ö–∞–∑–∞“õ —Å–∞—Ä–±–∞–∑–¥–∞—Ä—ã –º—ã–ª—Ç—ã“õ—Ç–∞–Ω –±–∞—Å“õ–∞ “õ–∞–Ω–¥–∞–π “õ–∞—Ä—É “õ–æ–ª–¥–∞–Ω–¥—ã?", options: ["–ú–æ—Ä–≥–µ–Ω—à—Ç–µ—Ä–Ω", "–£–ª—ã –≥–∞–∑", "–ê—Ä–±–∞–ª–µ—Ç", "–£–ª—ã “Ø—Ä–º–µ–ª—ñ —Ç“Ø—Ç—ñ–ª"], correct: 1 },
            { time: 385, question: "–ñ–æ“£“ì–∞—Ä–ª–∞—Ä “õ–∞–Ω—à–∞ ”ô—Å–∫–µ—Ä –∂–æ“ì–∞–ª—Ç—Ç—ã?", options: ["11000 —Å–∞—Ä–±–∞–∑", "5000 —Å–∞—Ä–±–∞–∑", "50000 —Å–∞—Ä–±–∞–∑", "13000 —Å–∞—Ä–±–∞–∑"], correct: 1 },
            { time: 400, question: "–ë–∞—Ç—ã—Ä “ö–æ–Ω—Ç–∞–π—à—ã–Ω—ã“£ –∫–µ–ª–µ—Å—ñ –∫“Ø–Ω–≥–µ –∂–æ—Å–ø–∞—Ä—ã “õ–∞–Ω–¥–∞–π –±–æ–ª–¥—ã?", options: ["“ö–æ—Å—ã–º—à–∞ —Å–∞—Ä–±–∞–∑–¥–∞—Ä–¥—ã –∫“Ø—Ç—ñ–ø –±“Ø–∫—ñ–ª –∫“Ø—à—ñ–º–µ–Ω —à–∞–±—É—ã–ª–¥–∞—É", "–ñ–µ“£—ñ–ª–≥–µ–Ω—ñ–Ω —Ç“Ø—Å—ñ–Ω—ñ–ø “õ–∞–π—Ç–∞ —à–µ–≥—ñ–Ω—É", "–¢–∞—É–¥—ã“£ –∞—Ä—Ç—ã–Ω–∞–Ω –ñ”ô“£–≥—ñ—Ä —Ö–∞–Ω“ì–∞ —Å–æ“õ“õ—ã –∂–∞—Å–∞—É", "–ë—ñ—Ä–¥–µ–Ω —Å–æ“õ“õ—ã –∂–∞—Å–∞—É"], correct: 2 },
            { time: 447, question: "–û—Å—ã–Ω–¥–∞–π “õ–∏—ã–Ω –∂–∞“ì–¥–∞–π–¥–∞ “õ–∞–∑–∞“õ—Ç–∞—Ä“ì–∞ –∫”©–º–µ–∫–∫–µ –∫—ñ–º –∂”ô–Ω–µ “õ–∞–Ω—à–∞ ”ô—Å–∫–µ—Ä–º–µ–Ω –∫–µ–ª–¥—ñ?", options: ["“ö—ã—Ä“ì—ã–∑–¥–∞—Ä 3000 —Å–∞—Ä–±–∞–∑", "–ñ–∞–ª–∞“£—Ç”©—Å –ë–∞“ª–∞–¥“Ø—Ä 600 —Å–∞—Ä–±–∞–∑–¥–∞—Ä", "–ê–Ω–Ω–∞ –ò–æ–Ω–Ω–æ–≤–Ω–∞ 20000 —Å–∞—Ä–±–∞–∑", "–®—ã“£“ì—ã—Å —Ö–∞–Ω 1000 —Å–∞—Ä–±–∞–∑"], correct: 0 },
            { time: 470, question: "–û“õ–∏“ì–∞–Ω—ã“£ —à–∞—Ä—ã“õ—Ç–∞—É —à–µ–≥—ñ “õ–∞–Ω–¥–∞–π –±–æ–ª–¥—ã?", options: ["“ö—ã—Ä“ì—ã–∑–¥–∞—Ä–¥—ã“£ “ö–∞–∑–∞“õ—Ç–∞—Ä–¥—ã —Å–∞—Ç—É—ã", "–ñ–æ“£“ì–∞—Ä“ì–∞ –∫”©–º–µ–∫—Ç—ñ–Ω –∫–µ–ª—É—ñ", "“ö–∞–∑–∞“õ—Ç–∞—Ä–¥—ã“£ –∂–µ“£—É—ñ", "–ñ–∞–ª–∞“£—Ç”©—Å –ë–∞“ª–∞–¥“Ø—Ä–¥—ñ“£ –∫–µ–ª—É—ñ"], correct: 3 },
            { time: 496, question: "–ë“±–ª –∞“õ–ø–∞—Ä–∞—Ç—Ç—ã –±—ñ–∑–≥–µ –∫—ñ–º–¥–µ—Ä –∂–µ—Ç–∫—ñ–∑–¥—ñ?", options: ["–ë–∞—Ç—ã—Ä “ö–æ–Ω—Ç–∞–π—à—ã", "–ò–ª—å—è—Å –ù–∏—è–∑–±–µ–∫–æ–≤", "–ú.–•.–î—É–ª–∞—Ç–∏", "–ï–ª—à—ñ–ª–µ—Ä –ò–ª—å–∏–Ω –º–µ–Ω –ö—É—á—É–∫"], correct: 3 }
        ];

        let currentQuestionIndex = 0;
        let isPausedForQuestion = false;
        let score = 0;
        let statusTimeout;

        function formatTime(seconds) {
            if (isNaN(seconds)) return "00:00";
            let m = Math.floor(seconds / 60);
            let s = Math.floor(seconds % 60);
            if (m < 10) m = "0" + m;
            if (s < 10) s = "0" + s;
            return m + ":" + s;
        }

        startBtn.addEventListener('click', () => {
            startScreen.style.opacity = '0';
            setTimeout(() => { startScreen.style.display = 'none'; }, 500);
            video.currentTime = 235;
            video.play();
            playPauseBtn.innerText = "‚ùö‚ùö";
            showStatusAnim('play');
        });

        video.addEventListener('ended', () => { showResults(); });

        video.addEventListener('timeupdate', () => {
            if (!isPausedForQuestion && currentQuestionIndex < questions.length) {
                if (video.currentTime >= questions[currentQuestionIndex].time) {
                    triggerQuestion(questions[currentQuestionIndex]);
                }
            }
            seekBar.value = video.currentTime;
            seekBar.max = video.duration;
            curTimeText.innerText = formatTime(video.currentTime);
            durTimeText.innerText = formatTime(video.duration);
        });

        seekBar.addEventListener('input', () => {
            video.currentTime = seekBar.value;
            curTimeText.innerText = formatTime(seekBar.value);
        });

        function togglePlay() {
            if (isPausedForQuestion) return;

            if (video.paused) {
                video.play();
                playPauseBtn.innerText = "‚ùö‚ùö";
                showStatusAnim('play');
            }
            else {
                video.pause();
                playPauseBtn.innerText = "‚ñ∫";
                showStatusAnim('pause');
            }
        }

        // –û—Ä—Ç–∞–ª—ã“õ –∞–Ω–∏–º–∞—Ü–∏—è (–û—Å—ã–Ω—ã triggerQuestion —ñ—à—ñ–Ω–¥–µ –¥–µ —à–∞“õ—ã—Ä–∞–º—ã–∑)
        function showStatusAnim(type) {
            clearTimeout(statusTimeout);
            centerStatus.classList.remove('status-show');
            if (type === 'play') centerStatus.innerText = "‚ñ∫";
            else centerStatus.innerText = "‚ùö‚ùö";
            setTimeout(() => { centerStatus.classList.add('status-show'); }, 10);
            statusTimeout = setTimeout(() => { centerStatus.classList.remove('status-show'); }, 1000);
        }

        function skip(seconds) { video.currentTime += seconds; }

        function triggerQuestion(questionData) {
            video.pause();
            isPausedForQuestion = true;
            playPauseBtn.innerText = "‚ñ∫";

            // 1. –ë–∞—Å“õ–∞—Ä—É –ø–∞–Ω–µ–ª—ñ–Ω –∫“Ø—à—Ç–µ–ø –∫”©—Ä—Å–µ—Ç—É
            controlsArea.classList.add('force-show');

            // 2. –û—Ä—Ç–∞–ª—ã“õ –∞–Ω–∏–º–∞—Ü–∏—è–Ω—ã —à–∞“õ—ã—Ä—É (–°—ñ–∑–¥—ñ“£ —Å“±—Ä–∞—É—ã“£—ã–∑ –±–æ–π—ã–Ω—à–∞)
            showStatusAnim('pause');

            qText.innerText = questionData.question;
            answersContainer.innerHTML = '';

            questionData.options.forEach((option, index) => {
                const btn = document.createElement('button');
                btn.className = 'answer-btn';
                btn.innerText = option;
                btn.onclick = () => checkAnswer(index, questionData.correct);
                answersContainer.appendChild(btn);
            });
            overlay.style.display = 'flex';
        }

        function checkAnswer(selectedIndex, correctIndex) {
            overlay.style.display = 'none';

            // –ë–∞—Å“õ–∞—Ä—É –ø–∞–Ω–µ–ª—ñ–Ω –∂–∞—Å—ã—Ä—É
            controlsArea.classList.remove('force-show');

            if (selectedIndex === correctIndex) {
                flash('green');
                score++;
            } else {
                flash('red');
            }

            currentQuestionIndex++;
            isPausedForQuestion = false;
            video.play();
            playPauseBtn.innerText = "‚ùö‚ùö";
            showStatusAnim('play');
        }

        function flash(color) {
            flashDiv.className = '';
            void flashDiv.offsetWidth;
            if (color === 'green') flashDiv.classList.add('flash-green');
            else flashDiv.classList.add('flash-red');
            setTimeout(() => { flashDiv.className = ''; }, 1000);
        }

        function showResults() {
            video.pause();
            controlsArea.style.display = 'none';
            finalScore.innerText = score + " / " + questions.length;

            if (score === questions.length) {
                resultEmoji.innerHTML = "–ö–µ—Ä–µ–º–µ—Ç! –ù–∞“ì—ã–∑ –±–∞—Ç—ã—Ä! üèÜ";
                finalScore.style.borderColor = "#f1c40f";
            } else if (score > questions.length / 2) {
                resultEmoji.innerHTML = "–ñ–∞“õ—Å—ã –Ω”ô—Ç–∏–∂–µ! üòé";
            } else {
                resultEmoji.innerHTML = "–¢–∞—Ä–∏—Ö—Ç—ã –∫”©–±—ñ—Ä–µ–∫ –æ“õ—É –∫–µ—Ä–µ–∫... üìö";
                finalScore.style.borderColor = "#e74c3c";
            }
            resultScreen.style.display = 'flex';
        }

        function smoothExit() {
            let vol = video.volume;
            const fadeAudio = setInterval(() => {
                if (vol > 0.1) { vol -= 0.1; video.volume = vol; }
                else { clearInterval(fadeAudio); }
            }, 50);

            document.body.style.opacity = '0';

            setTimeout(() => {
                sessionStorage.setItem('skipIntro', 'true');
                window.location.href = 'index.html';
            }, 1000);
        }
    </script>

</body>
</html>